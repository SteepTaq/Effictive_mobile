{
	"openapi": "3.0.3",
	"info": { "title": "Subscriptions API", "version": "1.0.0" },
	"servers": [{ "url": "http://localhost:8080" }],
	"paths": {
		"/subscriptions": {
			"get": {
				"summary": "List subscriptions for specific user and service",
				"parameters": [
					{
						"in": "query",
						"name": "user_id",
						"required": true,
						"schema": { "type": "string", "format": "uuid" }
					},
					{
						"in": "query",
						"name": "service_name",
						"required": true,
						"schema": { "type": "string" }
					},
					{
						"in": "query",
						"name": "limit",
						"schema": { "type": "integer", "default": 50 }
					},
					{
						"in": "query",
						"name": "offset",
						"schema": { "type": "integer", "default": 0 }
					}
				],
				"responses": {
					"200": { "description": "OK" },
					"400": { "description": "Bad Request" }
				}
			},
			"post": {
				"summary": "Create subscription",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": [
									"service_name",
									"price",
									"user_id",
									"start_date"
								],
								"properties": {
									"service_name": { "type": "string" },
									"price": { "type": "integer" },
									"user_id": {
										"type": "string",
										"format": "uuid"
									},
									"start_date": {
										"type": "string",
										"example": "07-2025"
									},
									"end_date": {
										"type": "string",
										"nullable": true,
										"example": "12-2025"
									}
								}
							}
						}
					}
				},
				"responses": { "201": { "description": "Created" } }
			}
		},
		"/subscriptions/{id}": {
			"get": {
				"summary": "Get subscription",
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": {
					"200": { "description": "OK" },
					"404": { "description": "Not found" }
				}
			},
			"put": {
				"summary": "Update subscription",
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": [
									"service_name",
									"price",
									"user_id",
									"start_date"
								],
								"properties": {
									"service_name": { "type": "string" },
									"price": { "type": "integer" },
									"user_id": {
										"type": "string",
										"format": "uuid"
									},
									"start_date": {
										"type": "string",
										"example": "07-2025"
									},
									"end_date": {
										"type": "string",
										"nullable": true,
										"example": "12-2025"
									}
								}
							}
						}
					}
				},
				"responses": { "200": { "description": "OK" } }
			},
			"delete": {
				"summary": "Delete subscription",
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": { "type": "integer" }
					}
				],
				"responses": { "204": { "description": "No content" } }
			}
		},
		"/subscriptions/summary": {
			"get": {
				"summary": "Calculate total subscription cost for specific user and service",
				"parameters": [
					{
						"in": "query",
						"name": "from",
						"required": true,
						"schema": { "type": "string", "example": "07-2025" }
					},
					{
						"in": "query",
						"name": "to",
						"required": true,
						"schema": { "type": "string", "example": "12-2025" }
					},
					{
						"in": "query",
						"name": "user_id",
						"required": true,
						"schema": { "type": "string", "format": "uuid" }
					},
					{
						"in": "query",
						"name": "service_name",
						"required": true,
						"schema": { "type": "string" }
					}
				],
				"responses": {
					"200": {
						"description": "OK",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"total": { "type": "integer" },
										"user_id": {
											"type": "string",
											"format": "uuid"
										},
										"service_name": { "type": "string" },
										"period": {
											"type": "object",
											"properties": {
												"from": { "type": "string" },
												"to": { "type": "string" }
											}
										}
									}
								}
							}
						}
					},
					"400": { "description": "Bad Request" }
				}
			}
		}
	}
}
